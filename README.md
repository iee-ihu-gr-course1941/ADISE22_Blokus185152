# ADISE22_Blokus185152

 Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα: 
https://users.iee.ihu.gr/~it185152/ADISE22_Blokus185152/www/
(website under maintenance)

# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ gh repo clone iee-ihu-gr-course1941/ADISE22_Blokus185152`

 * Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'test_project_db
' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο schema.sql



# Περιγραφή Παιχνιδιού

Το Blokus παίζεται ως εξής: Το παιχνίδι παίζεται σε έναν τετράγωνο πίνακα χωρισμένο σε 20 σειρές και 20 στήλες, για ένα σύνολο 400 τετραγώνων. Υπάρχουν συνολικά 84 πλακίδια παιχνιδιού, οργανωμένα σε 21 σχήματα σε καθένα από τα τέσσερα χρώματα: μπλε, κίτρινο, κόκκινο και πράσινο. Τα 21 σχήματα βασίζονται σε ελεύθερα πολυομίνο από ένα έως πέντε τετράγωνα (ένα μονόμινο, ένα ντόμινο, δύο τρομινό/τριόμινο, πέντε τετρομινό και 12 πεντομίνο).

Οι τυπικοί κανόνες παιχνιδιού για όλες τις παραλλαγές του παιχνιδιού είναι οι εξής:

Η σειρά παιχνιδιού βασίζεται στο χρώμα των κομματιών: μπλε, κίτρινο, κόκκινο, πράσινο.
Το πρώτο κομμάτι που παίζεται από κάθε χρώμα τοποθετείται σε μία από τις τέσσερις γωνίες του ταμπλό. Κάθε νέο κομμάτι που παίζεται πρέπει να τοποθετείται έτσι ώστε να αγγίζει τουλάχιστον ένα κομμάτι του ίδιου χρώματος, με επιτρεπόμενη μόνο επαφή από τη γωνία προς τη γωνία — οι άκρες δεν μπορούν να αγγίξουν. Ωστόσο, επιτρέπεται η επαφή από άκρη σε άκρη μεταξύ κομματιών διαφορετικών χρωμάτων.
Όταν ένας παίκτης δεν μπορεί να τοποθετήσει ένα κομμάτι, περνάει και το παιχνίδι συνεχίζεται κανονικά. Το παιχνίδι τελειώνει όταν κανείς δεν μπορεί να τοποθετήσει άλλα κομμάτια.
Μόλις τελειώσει το παιχνίδι, κάθε παίκτης μετράει κάθε τετράγωνο στο κομμάτι(α) που ΔΕΝ τοποθέτησε στον πίνακα, μετρώντας το καθένα ως αρνητικό (−1) πόντο (π.χ. ένα τετρόμινο που δεν έχει παιχτεί αξίζει −4 πόντους). Ένας παίκτης που έπαιξε όλα τα κομμάτια του απονέμεται μπόνους 15 πόντων. Εάν το τελευταίο κομμάτι που παίχτηκε ήταν μονόμινο, υπό την προϋπόθεση ότι έχουν παιχτεί όλα τα κομμάτια του δικού του χρώματος, ο παίκτης λαμβάνει ένα μπόνους 20 πόντων. Ο παίκτης με την υψηλότερη βαθμολογία κερδίζει.

Η βάση μας κρατάει τους εξής πίνακες και στοιχεία: Τον πινακα board ,οπου γινονται ολες οι κινησεις.Κραταει τα δυο repository(κοκκινο και μπλε).Τελος κραταει για ολα τα παραπανω ενα αντιγραφω σε περιπτωση επανεκινησεις του παιχνιδιου.

Η εφαρμογή τρεχει πληρως και μπορει να παιχτει ενα κανονικο παιχνιδι Blokus.Πραγματα πρως βελτιωση οταν υπαρχει νικητης να γινετε αυτοματα η επανεκινηση και οχι απο τον χρηστη οπως συμβαινει τωρα.Επισης υπαρχει θεμα με το login οποτε τα repository δεν γινονται update στο website.Τελος βελτιωση στο css κομματι της εφαρμογης.

## Συντελεστές

Περιγράψτε τις αρμοδιότητες της ομάδας.

Προγραμματιστής 1: PHP API 

Προγραμματιστής 2: Jquery :function draw_empty_board():Δημιουργια κενου πινακα 20*20

function draw_empty_RepoR(p):Δημιουργια κοκκινου πινακα 21 θεσεων
function draw_empty_RepoB(p):Δημιουργια μπλε πινακα 21 θεσεων

function fill_board():Γεμιζει τον πινακα board απο database

function fill_RED_tables():Γεμιζει κοκκινο τον πινακα απο database

function fill_BLUE_tables():Γεμιζει μπλε τον πινακα απο database

function check_tables(clr):τσεκαρει τα repository 

function login_to_game():Μπαινει στο παιχνιδι 

function login_result(data):Ελεγχει αμα υπαρχει προβλημα

function login_error(data,y,z,c):εμφανιζει το προβλημα

function game_status_update():Κανει update τον χρονο που παιζει καποιος 

function update_status(data):Ελεγχη ποιος παιζει 

function update_info():Κανει update το ποιος παιζει 

function reset_board():Επαναφερει τον πινακα board 

function reset_repositorys():Επαναφερει τα repositorys

function reset_repositorysR():Επαναφερει το repositorys Red

function reset_repositorysB():Επαναφερει το repositorys Blue

function do_move2():null

function getschm():Xωριζει την απαντηση του χρηστη

function do_move():Κανει την πρωτη κινηση 

function move_result(data):Εμφανιζει την πρωτη κινηση

function fill_board_by_data(data):Γεμιζει το πινακα board

function fill_RED_repo_by_data(dataR):Γεμιζει το πινακα Red 

function fill_BLUE_repo_by_data(dataB):Γεμιζει το πινακα Blue

function check_repo_by_data(dataAll):Ελεγχει τα Repository αμα εχει χρησημοποιηθει το σχημα που εβαλε ο παιχτης 

function fill_check_by_data(dataB):Εμφανιζει τα Database

function start_dragging ( event, ui ):null

function dropping( event, ui ):null

function end_dragging ( event, ui ):null



Both:Σχεδιασμός mysql




# Περιγραφή API

## Methods


### Board
#### Ανάγνωση Board

```
GET /board/
```

Επιστρέφει το [Board](#Board).

#### Αρχικοποίηση Board
```
POST /board/
```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Board](#Board).

### Repository
#### Ανάγνωση Repository

```
GET /repository/:B

```
Παιρνει τιμες B OR R
Επιστρέφει το [Repository](#Repository).

#### Αρχικοποίηση Repository
```
POST /repository/
```

Αρχικοποιεί τα Repository, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Repository](#Repository).

### Piece
#### Ανάγνωση Θέσης/Πιονιού

```
GET /board/piece/:x/:y/
```

Κάνει την κίνηση του πιονιού από αποτο repository στην θέση x,y. Προφανώς ελέγχεται η κίνηση αν είναι νόμιμη καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token.
Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο.

#### Μεταβολή Θέσης Πιονιού

```
PUT /board/piece/:x/:y/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `x`               | Η νέα θέση x                | yes        |
| `y`               | Η νέα θέση y                | yes        |

Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το χρώμα του πιονιού και τον τύπο


### Player

#### Ανάγνωση στοιχείων παίκτη
```
GET /players/:p
```

Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι 'B' ή 'R'.

#### Καθορισμός στοιχείων παίκτη
```
PUT /players/:p
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη p. | yes        |
| `color`           | To χρώμα που επέλεξε ο παίκτης p. | yes        |


Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).



## Entities


### Board
---------

Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `x`                      | H συντεταγμένη x του τετραγώνου              | 1..8                                |
| `y`                      | H συντεταγμένη y του τετραγώνου              | 1..8                                |
| `piece_color`            | To χρώμα του πιονιού                         | 'B','R', null                       |
| `piece_shape`                 | To Πιόνι που υπάρχει στο τετράγωνο           | 'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U'     |



### Players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `username`               | Όνομα παίκτη                                 | String                              |
| `piece_color`            | To χρώμα που παίζει ο παίκτης                | 'B','R'                             |
| `token  `                | To κρυφό token του παίκτη. Επιστρέφεται μόνο τη στιγμή της εισόδου του παίκτη στο παιχνίδι | HEX |


### Game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `status  `               | Κατάσταση             | 'not active', 'initialized', 'started', 'ended', 'aborded'     |
| `p_turn`                 | To χρώμα του παίκτη που παίζει        | 'B','R',null                              |
| `result`                 |  To χρώμα του παίκτη που κέρδισε |'B','R',null                              |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού         | timestamp |
